{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Implement admin access UI: a top-bar Admin button shown only to admins that opens the admin panel, plus an accept/decline admin invitation popup that auto-appears on login for invited principals.",
  "architectural_notes": [
    "Role-based UI gating: show Admin nav button only when user has admin role/flag",
    "On login, check for pending admin invitations for the current principal and trigger invitation modal automatically"
  ],
  "known_issues": [
    "Admin panel link/button and admin invitation accept/decline popup are not currently appearing as expected"
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-fix-the-frontend-header-so-the-admin-panel-button-appears-in-the-top-navigation-as-shown-in-the-uploaded-screenshot-when-the-logged-in-principal-is-an-admin-and-clicking-it-navigates-directly-to-the-admin-panel-route",
      "title": "Fix the frontend header so the Admin Panel button appears in the top navigation (as shown in the uploaded screenshot) when the logged-in principal is an admin, and clicking it navigates directly to the admin panel route.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-make-the-admin-invitation-accept-decline-modal-appear-automatically-immediately-after-login-whenever-the-logged-in-principal-has-a-pending-admin-invitation-and-ensure-it-is-not-suppressed-by-initial-authorization-role-check-timing",
      "title": "Make the admin invitation accept/decline modal appear automatically immediately after login whenever the logged-in principal has a pending admin invitation, and ensure it is not suppressed by initial authorization/role-check timing.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-accepting-an-admin-invitation-grants-admin-access-and-immediately-updates-the-ui-so-the-admin-panel-button-becomes-visible-without-requiring-a-page-refresh",
      "title": "Ensure accepting an admin invitation grants admin access and immediately updates the UI so the Admin Panel button becomes visible without requiring a page refresh.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Add an Admin button to the top navigation bar that is only visible to admin users and opens the admin panel directly when clicked",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Show an accept/decline admin invitation popup automatically upon login when the logged-in principal has a pending admin invitation",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Ensure the backend exposes an admin-check method used by the frontend so that admin users can be detected reliably and the top-bar “Admin Panel” button renders only for admins.",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Fix admin top-bar button visibility and auto admin-invitation accept/decline popup on login",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}